<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>plant_selector: /home/amasse/catkin_ws/src/plant_selector/src/clustering_tests.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">plant_selector
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">clustering_tests.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespaceclustering__tests"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html">clustering_tests</a></td></tr>
<tr class="memdesc:namespaceclustering__tests"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the centroids of weeds from provided point cloud selection. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4ea033d1d4005c8bdedbed195adbef95"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a4ea033d1d4005c8bdedbed195adbef95">array_to_pc</a> (points)</td></tr>
<tr class="memdesc:a4ea033d1d4005c8bdedbed195adbef95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take in array of points and format it into an open3d point cloud.  <a href="namespaceclustering__tests.html#a4ea033d1d4005c8bdedbed195adbef95">More...</a><br /></td></tr>
<tr class="separator:a4ea033d1d4005c8bdedbed195adbef95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc55df03eec2af5e35038957f110b701"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#afc55df03eec2af5e35038957f110b701">assemble_weeds_from_label</a> (leaves, best_S)</td></tr>
<tr class="memdesc:afc55df03eec2af5e35038957f110b701"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assembles dictionary of point clouds representing weeds given labels from bestS for each leaf.  <a href="namespaceclustering__tests.html#afc55df03eec2af5e35038957f110b701">More...</a><br /></td></tr>
<tr class="separator:afc55df03eec2af5e35038957f110b701"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a453852ec55599d14e1d32337bfe476a3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a453852ec55599d14e1d32337bfe476a3">brute_force_optimize</a> (E, leaves, max_weeds=5)</td></tr>
<tr class="memdesc:a453852ec55599d14e1d32337bfe476a3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Brute force optimization of cost functions to find best assignment S of leaves to weeds.  <a href="namespaceclustering__tests.html#a453852ec55599d14e1d32337bfe476a3">More...</a><br /></td></tr>
<tr class="separator:a453852ec55599d14e1d32337bfe476a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a280dd86c75832fb82b62e19e01b05e25"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a280dd86c75832fb82b62e19e01b05e25">calculate_centroids</a> (segments)</td></tr>
<tr class="memdesc:a280dd86c75832fb82b62e19e01b05e25"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the centroid of each segment by avg position.  <a href="namespaceclustering__tests.html#a280dd86c75832fb82b62e19e01b05e25">More...</a><br /></td></tr>
<tr class="separator:a280dd86c75832fb82b62e19e01b05e25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46c1587453c6d39578470240c4e894e7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a46c1587453c6d39578470240c4e894e7">calculate_epsilon</a> (pcd_array)</td></tr>
<tr class="memdesc:a46c1587453c6d39578470240c4e894e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses method described here: <a href="https://towardsdatascience.com/machine-learning-clustering-dbscan-determine-the-optimal-value-for-epsilon-eps-python-example-3100091cfbc">https://towardsdatascience.com/machine-learning-clustering-dbscan-determine-the-optimal-value-for-epsilon-eps-python-example-3100091cfbc</a> and kneed package to find the ideal epsilon for our data Currently out of use because "ideal" epsilon does not neccisarily produce correct weeds.  <a href="namespaceclustering__tests.html#a46c1587453c6d39578470240c4e894e7">More...</a><br /></td></tr>
<tr class="separator:a46c1587453c6d39578470240c4e894e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad70f1346c903d51a4f22b3f6e34f4e26"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#ad70f1346c903d51a4f22b3f6e34f4e26">calculate_normal</a> (dirt)</td></tr>
<tr class="memdesc:ad70f1346c903d51a4f22b3f6e34f4e26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds normal from dirt point cloud.  <a href="namespaceclustering__tests.html#ad70f1346c903d51a4f22b3f6e34f4e26">More...</a><br /></td></tr>
<tr class="separator:ad70f1346c903d51a4f22b3f6e34f4e26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6b6560df5dde5df87b39ee99e765526"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#ab6b6560df5dde5df87b39ee99e765526">DBSCAN_calculate_pose</a> (points, algorithm='npc', weights=[0, 100, 100, 0, 100, 0], return_multiple_grasps=False)</td></tr>
<tr class="memdesc:ab6b6560df5dde5df87b39ee99e765526"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses DBSCAN to cluster weeds and calculate pose.  <a href="namespaceclustering__tests.html#ab6b6560df5dde5df87b39ee99e765526">More...</a><br /></td></tr>
<tr class="separator:ab6b6560df5dde5df87b39ee99e765526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ef85a6b215e9df9ef3cd6464f68af3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a05ef85a6b215e9df9ef3cd6464f68af3">distance_cost</a> (E, leaves, S)</td></tr>
<tr class="memdesc:a05ef85a6b215e9df9ef3cd6464f68af3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the value of the distance cost function for a given solution.  <a href="namespaceclustering__tests.html#a05ef85a6b215e9df9ef3cd6464f68af3">More...</a><br /></td></tr>
<tr class="separator:a05ef85a6b215e9df9ef3cd6464f68af3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af66e06167189a13c440cef7fd826e0b7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#af66e06167189a13c440cef7fd826e0b7">find_combinations</a> (num_edges, max_weeds, allow_singles=True)</td></tr>
<tr class="memdesc:af66e06167189a13c440cef7fd826e0b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use more_itertools to return a list of possible solutions, S.  <a href="namespaceclustering__tests.html#af66e06167189a13c440cef7fd826e0b7">More...</a><br /></td></tr>
<tr class="separator:af66e06167189a13c440cef7fd826e0b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bced676eb6e53353313781958e4ebd6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a8bced676eb6e53353313781958e4ebd6">float_to_rgb</a> (float_rgb)</td></tr>
<tr class="memdesc:a8bced676eb6e53353313781958e4ebd6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a packed float RGB format to an RGB list.  <a href="namespaceclustering__tests.html#a8bced676eb6e53353313781958e4ebd6">More...</a><br /></td></tr>
<tr class="separator:a8bced676eb6e53353313781958e4ebd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c4a8e52e50441a0ab30147be37540c3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a1c4a8e52e50441a0ab30147be37540c3">FRG_calculate_pose</a> (points, algorithm='npc', weights=[0, 100, 100, 0, 100, 0], proximity_thresh=0.05, return_multiple_grasps=False)</td></tr>
<tr class="memdesc:a1c4a8e52e50441a0ab30147be37540c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses Facet Region Growing method and PCA to return the pose for the gripper.  <a href="namespaceclustering__tests.html#a1c4a8e52e50441a0ab30147be37540c3">More...</a><br /></td></tr>
<tr class="separator:a1c4a8e52e50441a0ab30147be37540c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10abe63328b91fe8acc812741ac9351f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a10abe63328b91fe8acc812741ac9351f">genetic_fitness_function</a> (S_bits, E, leaves)</td></tr>
<tr class="memdesc:a10abe63328b91fe8acc812741ac9351f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The least squares cost function but formatted for use with the genetic algorithm.  <a href="namespaceclustering__tests.html#a10abe63328b91fe8acc812741ac9351f">More...</a><br /></td></tr>
<tr class="separator:a10abe63328b91fe8acc812741ac9351f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8d2f0c8abc2e055fcdc507bde0aebef"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#af8d2f0c8abc2e055fcdc507bde0aebef">initial_segmentation</a> (points, algorithm='npc', weights=[0, 100, 100, 0, 100, 0])</td></tr>
<tr class="memdesc:af8d2f0c8abc2e055fcdc507bde0aebef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does initial segmentation --&gt; Uses specified algorithm to seperate weeds from dirt.  <a href="namespaceclustering__tests.html#af8d2f0c8abc2e055fcdc507bde0aebef">More...</a><br /></td></tr>
<tr class="separator:af8d2f0c8abc2e055fcdc507bde0aebef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe1fc3ec26528c2204fcaa36f8e023d2"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#abe1fc3ec26528c2204fcaa36f8e023d2">kmeans_from_scratch</a> (X, k, weights=[1, 1, 1, 1, 1, 1], redmean=False)</td></tr>
<tr class="memdesc:abe1fc3ec26528c2204fcaa36f8e023d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements kmeans from scratch Mostly stolen from <a href="https://medium.com/nerd-for-tech/k-means-python-implementation-from-scratch-8400f30b8e5c">https://medium.com/nerd-for-tech/k-means-python-implementation-from-scratch-8400f30b8e5c</a>.  <a href="namespaceclustering__tests.html#abe1fc3ec26528c2204fcaa36f8e023d2">More...</a><br /></td></tr>
<tr class="separator:abe1fc3ec26528c2204fcaa36f8e023d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53a30ab4a4770e18cf22eb0338592835"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a53a30ab4a4770e18cf22eb0338592835">labels_to_dict</a> (pcd, labels)</td></tr>
<tr class="memdesc:a53a30ab4a4770e18cf22eb0338592835"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seperats pcd into dict of clusters based on labels.  <a href="namespaceclustering__tests.html#a53a30ab4a4770e18cf22eb0338592835">More...</a><br /></td></tr>
<tr class="separator:a53a30ab4a4770e18cf22eb0338592835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b0ff0a178b17ba6845d213dee50df4f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a7b0ff0a178b17ba6845d213dee50df4f">LstSqrs_cost</a> (S, E, leaves, return_cents=False, default_res=3.5, default_dist=0.07)</td></tr>
<tr class="memdesc:a7b0ff0a178b17ba6845d213dee50df4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses least squares to find the centroids of plants given their leaf assignments.  <a href="namespaceclustering__tests.html#a7b0ff0a178b17ba6845d213dee50df4f">More...</a><br /></td></tr>
<tr class="separator:a7b0ff0a178b17ba6845d213dee50df4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa03a7abe78a14d571ca8beabd384da3c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#aa03a7abe78a14d571ca8beabd384da3c">reduce_S</a> (S)</td></tr>
<tr class="memdesc:aa03a7abe78a14d571ca8beabd384da3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">If S contains non-consecutive numbers, we can fix that.  <a href="namespaceclustering__tests.html#aa03a7abe78a14d571ca8beabd384da3c">More...</a><br /></td></tr>
<tr class="separator:aa03a7abe78a14d571ca8beabd384da3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f5cfd66d1f61ccf9738553d2f3e5af1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a6f5cfd66d1f61ccf9738553d2f3e5af1">remove_false_positives</a> (centroids, weeds_array)</td></tr>
<tr class="memdesc:a6f5cfd66d1f61ccf9738553d2f3e5af1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete centroid guesses that are not near any weed points.  <a href="namespaceclustering__tests.html#a6f5cfd66d1f61ccf9738553d2f3e5af1">More...</a><br /></td></tr>
<tr class="separator:a6f5cfd66d1f61ccf9738553d2f3e5af1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a117fe62ffe51ff52c1d77c8e02881d26"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a117fe62ffe51ff52c1d77c8e02881d26">separate_by_height</a> (segments, height_threshold=0.001)</td></tr>
<tr class="memdesc:a117fe62ffe51ff52c1d77c8e02881d26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seperates dirt point cloud and weed point clouds by avg height.  <a href="namespaceclustering__tests.html#a117fe62ffe51ff52c1d77c8e02881d26">More...</a><br /></td></tr>
<tr class="separator:a117fe62ffe51ff52c1d77c8e02881d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3bc271d1adef52764a15cc65d0e5d28"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#aa3bc271d1adef52764a15cc65d0e5d28">separate_by_size</a> (segments, using_npc=False)</td></tr>
<tr class="memdesc:aa3bc271d1adef52764a15cc65d0e5d28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seperates dirt point cloud and weed point clouds by number of pts.  <a href="namespaceclustering__tests.html#aa3bc271d1adef52764a15cc65d0e5d28">More...</a><br /></td></tr>
<tr class="separator:aa3bc271d1adef52764a15cc65d0e5d28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26e4c1a10394ff38deccdb22eed6cf71"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespaceclustering__tests.html#a26e4c1a10394ff38deccdb22eed6cf71">solution_to_plants</a> (E, leaves, S)</td></tr>
<tr class="memdesc:a26e4c1a10394ff38deccdb22eed6cf71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the solution S to create a dictionary of edges and a dictionary of points.  <a href="namespaceclustering__tests.html#a26e4c1a10394ff38deccdb22eed6cf71">More...</a><br /></td></tr>
<tr class="separator:a26e4c1a10394ff38deccdb22eed6cf71"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Amanda Massey <a href="#" onclick="location.href='mai'+'lto:'+'ama'+'ss'+'e@u'+'mi'+'ch.'+'ed'+'u'; return false;">amass<span style="display: none;">.nosp@m.</span>e@um<span style="display: none;">.nosp@m.</span>ich.e<span style="display: none;">.nosp@m.</span>du</a> </dd></dl>
<dl class="section date"><dt>Date</dt><dd>11/29/2022 </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
