<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>plant_selector: /home/amasse/catkin_ws/src/plant_selector/src/find_centroids.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">plant_selector
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#namespaces">Namespaces</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">find_centroids.py File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacefind__centroids"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html">find_centroids</a></td></tr>
<tr class="memdesc:namespacefind__centroids"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the centroids of weeds from provided point cloud selection. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a69b148f70ede83bbebd2e24354fff972"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a69b148f70ede83bbebd2e24354fff972">array_to_pc</a> (points)</td></tr>
<tr class="memdesc:a69b148f70ede83bbebd2e24354fff972"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take in array of points and format it into an open3d point cloud.  <a href="namespacefind__centroids.html#a69b148f70ede83bbebd2e24354fff972">More...</a><br /></td></tr>
<tr class="separator:a69b148f70ede83bbebd2e24354fff972"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90de2eb3f3b76c75eae34dc62b17e5d4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a90de2eb3f3b76c75eae34dc62b17e5d4">assemble_weeds_from_label</a> (leaves, best_S)</td></tr>
<tr class="memdesc:a90de2eb3f3b76c75eae34dc62b17e5d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Assembles dictionary of point clouds representing weeds given labels from bestS for each leaf.  <a href="namespacefind__centroids.html#a90de2eb3f3b76c75eae34dc62b17e5d4">More...</a><br /></td></tr>
<tr class="separator:a90de2eb3f3b76c75eae34dc62b17e5d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a058cd803769fddea0beb709cffab930a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a058cd803769fddea0beb709cffab930a">brute_force_optimize</a> (E, leaves, max_weeds=5)</td></tr>
<tr class="memdesc:a058cd803769fddea0beb709cffab930a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Brute force optimization of cost functions to find best assignment S of leaves to weeds.  <a href="namespacefind__centroids.html#a058cd803769fddea0beb709cffab930a">More...</a><br /></td></tr>
<tr class="separator:a058cd803769fddea0beb709cffab930a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a882ae85868a196a87701e2748ce481"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a9a882ae85868a196a87701e2748ce481">calculate_centroids</a> (segments)</td></tr>
<tr class="memdesc:a9a882ae85868a196a87701e2748ce481"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the centroid of each segment by avg position.  <a href="namespacefind__centroids.html#a9a882ae85868a196a87701e2748ce481">More...</a><br /></td></tr>
<tr class="separator:a9a882ae85868a196a87701e2748ce481"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d68395efaac405722198ff2545c0d96"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a0d68395efaac405722198ff2545c0d96">calculate_epsilon</a> (pcd_array)</td></tr>
<tr class="memdesc:a0d68395efaac405722198ff2545c0d96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses method described here: <a href="https://towardsdatascience.com/machine-learning-clustering-dbscan-determine-the-optimal-value-for-epsilon-eps-python-example-3100091cfbc">https://towardsdatascience.com/machine-learning-clustering-dbscan-determine-the-optimal-value-for-epsilon-eps-python-example-3100091cfbc</a> and kneed package to find the ideal epsilon for our data Currently out of use because "ideal" epsilon does not neccisarily produce correct weeds.  <a href="namespacefind__centroids.html#a0d68395efaac405722198ff2545c0d96">More...</a><br /></td></tr>
<tr class="separator:a0d68395efaac405722198ff2545c0d96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e798e6ce2e1f904b96ab84cfaff96b7"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a1e798e6ce2e1f904b96ab84cfaff96b7">calculate_normal</a> (dirt)</td></tr>
<tr class="memdesc:a1e798e6ce2e1f904b96ab84cfaff96b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds normal from dirt point cloud.  <a href="namespacefind__centroids.html#a1e798e6ce2e1f904b96ab84cfaff96b7">More...</a><br /></td></tr>
<tr class="separator:a1e798e6ce2e1f904b96ab84cfaff96b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16f96db15ab24f13be1aa2a5579a3b65"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a16f96db15ab24f13be1aa2a5579a3b65">color_calculate_pose</a> (points, return_multiple_grasps=False)</td></tr>
<tr class="memdesc:a16f96db15ab24f13be1aa2a5579a3b65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses ratios between colors and DBSCAN to calculate the poses for weeds in the provided selection.  <a href="namespacefind__centroids.html#a16f96db15ab24f13be1aa2a5579a3b65">More...</a><br /></td></tr>
<tr class="separator:a16f96db15ab24f13be1aa2a5579a3b65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5bc1ce41db489dbbe9d684fc88d0e5a5"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a5bc1ce41db489dbbe9d684fc88d0e5a5">DBSCAN_calculate_pose</a> (points, algorithm='npc', weights=[0, 100, 100, 0, 100, 0], return_multiple_grasps=False)</td></tr>
<tr class="memdesc:a5bc1ce41db489dbbe9d684fc88d0e5a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses DBSCAN to cluster weeds and calculate pose.  <a href="namespacefind__centroids.html#a5bc1ce41db489dbbe9d684fc88d0e5a5">More...</a><br /></td></tr>
<tr class="separator:a5bc1ce41db489dbbe9d684fc88d0e5a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac996809e98e41b86750ce4cf29f03845"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#ac996809e98e41b86750ce4cf29f03845">distance_cost</a> (E, leaves, S)</td></tr>
<tr class="memdesc:ac996809e98e41b86750ce4cf29f03845"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate the value of the distance cost function for a given solution.  <a href="namespacefind__centroids.html#ac996809e98e41b86750ce4cf29f03845">More...</a><br /></td></tr>
<tr class="separator:ac996809e98e41b86750ce4cf29f03845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a466ad552ce38cb12d18c5360ae68218e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a466ad552ce38cb12d18c5360ae68218e">find_combinations</a> (num_edges, max_weeds, allow_singles=True)</td></tr>
<tr class="memdesc:a466ad552ce38cb12d18c5360ae68218e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use more_itertools to return a list of possible solutions, S.  <a href="namespacefind__centroids.html#a466ad552ce38cb12d18c5360ae68218e">More...</a><br /></td></tr>
<tr class="separator:a466ad552ce38cb12d18c5360ae68218e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d1e6562dd01f5155ee4faac586c4b2e"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a8d1e6562dd01f5155ee4faac586c4b2e">float_to_rgb</a> (float_rgb)</td></tr>
<tr class="memdesc:a8d1e6562dd01f5155ee4faac586c4b2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a packed float RGB format to an RGB list.  <a href="namespacefind__centroids.html#a8d1e6562dd01f5155ee4faac586c4b2e">More...</a><br /></td></tr>
<tr class="separator:a8d1e6562dd01f5155ee4faac586c4b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f86a352a844193fbd33174406ece525"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a4f86a352a844193fbd33174406ece525">FRG_calculate_pose</a> (points, algorithm='npc', weights=[0, 100, 100, 0, 100, 0], proximity_thresh=0.05, return_multiple_grasps=False)</td></tr>
<tr class="memdesc:a4f86a352a844193fbd33174406ece525"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses Facet Region Growing method and PCA to return the pose for the gripper.  <a href="namespacefind__centroids.html#a4f86a352a844193fbd33174406ece525">More...</a><br /></td></tr>
<tr class="separator:a4f86a352a844193fbd33174406ece525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea5fd300b0f9a81b231a9574a056d613"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#aea5fd300b0f9a81b231a9574a056d613">genetic_fitness_function</a> (S_bits, E, leaves)</td></tr>
<tr class="memdesc:aea5fd300b0f9a81b231a9574a056d613"><td class="mdescLeft">&#160;</td><td class="mdescRight">The least squares cost function but formatted for use with the genetic algorithm.  <a href="namespacefind__centroids.html#aea5fd300b0f9a81b231a9574a056d613">More...</a><br /></td></tr>
<tr class="separator:aea5fd300b0f9a81b231a9574a056d613"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea808e71d17ac65418d4dfc13f6d8b62"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#aea808e71d17ac65418d4dfc13f6d8b62">initial_segmentation</a> (points, algorithm='npc', weights=[0, 100, 100, 0, 100, 0])</td></tr>
<tr class="memdesc:aea808e71d17ac65418d4dfc13f6d8b62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Does initial segmentation --&gt; Uses specified algorithm to seperate weeds from dirt.  <a href="namespacefind__centroids.html#aea808e71d17ac65418d4dfc13f6d8b62">More...</a><br /></td></tr>
<tr class="separator:aea808e71d17ac65418d4dfc13f6d8b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8f4e831862cd20508723ae9bc40a29b"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#ae8f4e831862cd20508723ae9bc40a29b">kmeans_from_scratch</a> (X, k, weights=[1, 1, 1, 1, 1, 1], redmean=False)</td></tr>
<tr class="memdesc:ae8f4e831862cd20508723ae9bc40a29b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implements kmeans from scratch Mostly stolen from <a href="https://medium.com/nerd-for-tech/k-means-python-implementation-from-scratch-8400f30b8e5c">https://medium.com/nerd-for-tech/k-means-python-implementation-from-scratch-8400f30b8e5c</a>.  <a href="namespacefind__centroids.html#ae8f4e831862cd20508723ae9bc40a29b">More...</a><br /></td></tr>
<tr class="separator:ae8f4e831862cd20508723ae9bc40a29b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea7a58a12c61b028f55e7fef64fabdb3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#aea7a58a12c61b028f55e7fef64fabdb3">labels_to_dict</a> (pcd, labels)</td></tr>
<tr class="memdesc:aea7a58a12c61b028f55e7fef64fabdb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seperats pcd into dict of clusters based on labels.  <a href="namespacefind__centroids.html#aea7a58a12c61b028f55e7fef64fabdb3">More...</a><br /></td></tr>
<tr class="separator:aea7a58a12c61b028f55e7fef64fabdb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3507902e540b8fd485f1734dc8866e8"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#ac3507902e540b8fd485f1734dc8866e8">LstSqrs_cost</a> (S, E, leaves, return_cents=False, default_res=3.5, default_dist=0.07)</td></tr>
<tr class="memdesc:ac3507902e540b8fd485f1734dc8866e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uses least squares to find the centroids of plants given their leaf assignments.  <a href="namespacefind__centroids.html#ac3507902e540b8fd485f1734dc8866e8">More...</a><br /></td></tr>
<tr class="separator:ac3507902e540b8fd485f1734dc8866e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd07f5310508fa5454c803e06fcdc43f"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#afd07f5310508fa5454c803e06fcdc43f">reduce_S</a> (S)</td></tr>
<tr class="memdesc:afd07f5310508fa5454c803e06fcdc43f"><td class="mdescLeft">&#160;</td><td class="mdescRight">If S contains non-consecutive numbers, we can fix that.  <a href="namespacefind__centroids.html#afd07f5310508fa5454c803e06fcdc43f">More...</a><br /></td></tr>
<tr class="separator:afd07f5310508fa5454c803e06fcdc43f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cc6a0486a2ed528fde06c03b05cacff"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a9cc6a0486a2ed528fde06c03b05cacff">remove_false_positives</a> (centroids, weeds_array)</td></tr>
<tr class="memdesc:a9cc6a0486a2ed528fde06c03b05cacff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete centroid guesses that are not near any weed points.  <a href="namespacefind__centroids.html#a9cc6a0486a2ed528fde06c03b05cacff">More...</a><br /></td></tr>
<tr class="separator:a9cc6a0486a2ed528fde06c03b05cacff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae579400d0056b30df71a81c05a2e8306"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#ae579400d0056b30df71a81c05a2e8306">separate_by_height</a> (segments, height_threshold=0.001)</td></tr>
<tr class="memdesc:ae579400d0056b30df71a81c05a2e8306"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seperates dirt point cloud and weed point clouds by avg height.  <a href="namespacefind__centroids.html#ae579400d0056b30df71a81c05a2e8306">More...</a><br /></td></tr>
<tr class="separator:ae579400d0056b30df71a81c05a2e8306"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6406a6983f064d8b387944eb99de9be"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#af6406a6983f064d8b387944eb99de9be">separate_by_size</a> (segments, using_npc=False)</td></tr>
<tr class="memdesc:af6406a6983f064d8b387944eb99de9be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Seperates dirt point cloud and weed point clouds by number of pts.  <a href="namespacefind__centroids.html#af6406a6983f064d8b387944eb99de9be">More...</a><br /></td></tr>
<tr class="separator:af6406a6983f064d8b387944eb99de9be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9d869e1c2a749ec0add68d3e2706e4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacefind__centroids.html#a7f9d869e1c2a749ec0add68d3e2706e4">solution_to_plants</a> (E, leaves, S)</td></tr>
<tr class="memdesc:a7f9d869e1c2a749ec0add68d3e2706e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the solution S to create a dictionary of edges and a dictionary of points.  <a href="namespacefind__centroids.html#a7f9d869e1c2a749ec0add68d3e2706e4">More...</a><br /></td></tr>
<tr class="separator:a7f9d869e1c2a749ec0add68d3e2706e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
